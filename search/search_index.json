{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Spectral documentation","text":"<p>See the general contribution guidelines here, the app-related guidelines here and the kernel-related guidelines here.</p> <p>Besides, you can find the code of conduct here. </p> <p>And, you can look up the backend documentation here.</p>"},{"location":"CODE_OF_CONDUCT/","title":"Code of Conduct","text":""},{"location":"CODE_OF_CONDUCT/#shared-team-values","title":"Shared team values","text":"<ol> <li>Quality: We care about making the best product possible.</li> <li>Communication: We believe\u00a0it\u2019s\u00a0of utmost importance to have good\u00a0communication,\u00a0by being reachable, honest, and transparent</li> <li>Respect: All team members should always be respected</li> <li>Helpfulness: We want teammates to help other teammates when they are stuck</li> <li>Learning: We want to leave this experience having learned how to work in a team and practical applications of software engineering</li> <li>Leadership: We want to have some people making sure that there is a high-quality process for the development</li> </ol>"},{"location":"CODE_OF_CONDUCT/#assignment-description","title":"Assignment description","text":"<p>For this course, the main goal is to develop a toolkit for speech analysis for the Multimedia Computing group. To complete this part successfully, we will keep closely in touch with the client to ensure\u00a0that their\u00a0requirements\u00a0are fulfilled.\u00a0This\u00a0will be done\u00a0through weekly meetings with the client. Furthermore, we need to create a final report following the guidelines from the Technical writing course.\u00a0We will ensure that the report will be finished on time by following the deadlines on bright space\u00a0closely,\u00a0to complete them up to our desired standards.\u00a0This\u00a0should ensure that\u00a0most\u00a0of the\u00a0parts will be finished\u00a0before the final deadline crunch.</p>"},{"location":"CODE_OF_CONDUCT/#target-or-ambition-level","title":"Target or ambition level","text":"<p>Ideally, of course, we want a 10. However, the grade that we have decided we would all be\u00a0very happy\u00a0with is a 9. We would prefer not to go below an 8.</p>"},{"location":"CODE_OF_CONDUCT/#products","title":"Products","text":"<p>In the end, we should deliver a web application that\u00a0can be accessed\u00a0on the website\u00a0spectral.ewi.tudelft.nl. It will\u00a0be hosted\u00a0on a TU Delft server\u00a0just\u00a0like the kernel and documentation website\u00a0that we\u00a0will create.\u00a0The code will\u00a0be stored\u00a0on both the EEMCS Gitlab server and Github, where\u00a0the goal for Github is\u00a0to open-source the project.</p> <p>We will also have to create a final report about the project that\u00a0will be handed in\u00a0on Brightspace. We will\u00a0create\u00a0this report throughout the project by handing in the sub-assignments on Brightspace\u00a0as well. We will work on the report using Typst, which allows us to work on the project together in real-time.</p> <p>Any deliverable should at least meet the\u00a0requirements of the assignment\u00a0and should have been\u00a0checked completely\u00a0by at least\u00a02\u00a0people to ensure that all requirements\u00a0are met\u00a0and that the deliverable is of high enough quality.</p>"},{"location":"CODE_OF_CONDUCT/#planning","title":"Planning","text":"<p>We all have hard deadlines provided by the Software Project course. We need to always abide by these. Furthermore, we will have many internal deadlines. These can be of many forms.</p> <p>First of all, we have a general deadline for finishing the\u00a0implementation of the project\u00a0as soon as possible. Namely, we want to be\u00a0mostly done\u00a0by the start of June. Of course, what\u00a0\u201cmostly done\u201d\u00a0means can be up for debate, and similarly with\u00a0\u201cthe start of June\u201d.\u00a0This\u00a0is a very soft deadline, but we are aware of it as a team\u00a0and\u00a0we\u00a0will take reasonable actions to try to maintain it.</p> <p>The main form of internal deadlines is in the form of GitLab issues. Each issue gets assigned a person and a date. Issues that are expected further down the line are susceptible to changes. The assignee can also change depending on the workload of each and the difference between the expected and actual difficulty of a task.</p> <p>However, we\u00a0do\u00a0expect each person to do something, so if a team member continuously tries to push off\u00a0tasks\u00a0we will not allow them to do so.\u00a0If the lack of cooperation gets too large, it can theoretically escalate to the point of contacting the SP coordinators to see what action can be taken, such as expelling the member from the team (of course, we believe it is\u00a0extremely unlikely\u00a0for this to happen in our team).</p> <p>For group deliverables, each person has a say and can propose concerns with the current state of it.\u00a0We want to resolve most of them by consensus, but if\u00a0this\u00a0can\u2019t\u00a0be\u00a0realized\u00a0then we\u00a0will use a majority vote.</p> <p>Roman Knyazhitskiy will be the responsible and de facto person to hand in deliverables on Brightspace on behalf of the project group. However, we will allow somebody else to upload it if everybody agrees, which is a somewhat\u00a0common\u00a0situation.\u00a0We will have a rule that\u00a0there needs to be\u00a0something\u00a0submitted to Brightspace at least 2 hours before the\u00a0deadline,\u00a0to\u00a0make sure\u00a0we\u00a0don\u2019t\u00a0leave it blank.\u00a0We can always resubmit a newer version after the deadline.</p>"},{"location":"CODE_OF_CONDUCT/#behavior","title":"Behavior","text":"<p>Within the group, we treat each other with respect. We handle disagreements within the group by listening to each\u00a0other's\u00a0arguments and picking the best option based on those arguments.\u00a0In case\u00a0there does not appear to be a clear best option, a majority vote will be applied, which\u00a0in\u00a0the case of a\u00a0dichotomy\u00a0should lead to a decisive decision since we have 5 group members.</p> <p>If, for whatever reason, this does not work\u00a0out\u00a0we can always go on to the next step, which is to discuss the best solution with another party. Depending on the problem, this other party could be the TA, the coach, the client, or\u00a0possibly the\u00a0course staff. Hopefully, through\u00a0the use of\u00a0their guidance, we will be able to come to a consensus.</p> <p>Furthermore, if someone is late for a group meeting, we will be\u00a0quite\u00a0lenient for the first couple of times.\u00a0In case it does appear\u00a0to be a pattern, a reasonable punishment will be applied to discourage this behavior,\u00a0i.e.\u00a0bringing in some snacks for the others.\u00a0If the behavior does not improve, or someone stops joining meetings without\u00a0any\u00a0good reason, then\u00a0further punishments will be discussed\u00a0with the TA.</p>"},{"location":"CODE_OF_CONDUCT/#communication","title":"Communication","text":"<p>Within our group, we mostly communicate via WhatsApp, Mattermost, Zoom, Discord, Gitlab, Outlook,\u00a0and in\u00a0real life.\u00a0We\u00a0mostly\u00a0use WhatsApp for general discussions regarding our project, which includes\u00a0things such as\u00a0setting up meetings amongst ourselves, telling someone to look at a merge request on Gitlab,\u00a0etc.\u00a0Gitlab will be used\u00a0for sharing our code and discussing code-related issues or ideas.\u00a0We will also track our progress\u00a0together\u00a0on GitLab and plan\u00a0out\u00a0what we will work on during the next sprint.\u00a0We use Mattermost and Outlook\u00a0mostly\u00a0to communicate with the client, coach, and TA,\u00a0which includes tasks such as\u00a0setting up meetings and asking questions.\u00a0Last of all, we use Zoom during meetings with the client, TA, or coach in case one of us\u00a0is unable to\u00a0attend in person and Discord if we have an online internal meeting, which could be a work session\u00a0for\u00a0instance. And last of all, we do in-person\u00a0meetings,\u00a0in which we work and discuss.</p>"},{"location":"CODE_OF_CONDUCT/#commitment","title":"Commitment","text":"<p>The quality of the work from our group will be determined\u00a0by evaluating our work according to the rubric. This evaluation\u00a0we\u00a0be done\u00a0before the\u00a0midterm,\u00a0in weeks 7, 8, and 9.\u00a0The work of each team member\u00a0will also be looked at, which will\u00a0be done\u00a0at the end of each\u00a0sprint,\u00a0in our sprint retrospective.\u00a0During the sprint retrospective, we will\u00a0go over\u00a0the work each member has\u00a0done\u00a0what they did well, and what they could improve. This evaluation will also\u00a0make some use of\u00a0GitLab features such as activity (using, of course, reasonable judgment and common\u00a0sense,\u00a0since\u00a0some of these stats can be misleading\u00a0and/or\u00a0easily tricked).</p> <p>A measurement of the commitment of the chair can\u00a0be based\u00a0on\u00a02\u00a0moments. First of all, the chair is responsible for ensuring that everyone is present at the meeting, which includes setting a date and location\u00a0for the meeting. Secondly,\u00a0the\u00a0chair\u2019s\u00a0commitment can be measured\u00a0during the meeting. During the meeting, the chair's\u00a0main\u00a0responsibility is to ensure that the meeting stays on topic and that everyone\u00a0has the opportunity to\u00a0share their thoughts if they have any. If the chair succeeds on both of these points, then the commitment of the chair is\u00a0great.\u00a0If something goes wrong in either phase,\u00a0then\u00a0this will be discussed\u00a0during the next internal meeting to ensure\u00a0that\u00a0it goes better next time.</p> <p>To measure the commitment of the minute taker, we will\u00a0mostly\u00a0look at whether the meeting notes are complete and if no\u00a0important\u00a0details were left out. If we\u00a0do believe that\u00a0the notes were lackluster, then\u00a0this will be discussed\u00a0during our internal meeting.</p>"},{"location":"CODE_OF_CONDUCT/#division-of-tasks-and-roles","title":"Division of tasks and roles","text":"<p>The role of the chairman will be covered by Roman, as he naturally has good team-leading skills as well as a good amount of on-the-spot thinking that helps us coordinate our team better, which makes him the perfect fit for this job.\u00a0If Roman is unavailable to attend, then anyone else who is willing to take his spot is sufficient for our purposes.</p> <p>The role of a minute-taker will be cycled with every meeting, with Roman\u00a0being excluded\u00a0from this cycle due to his chairman role, as follows:</p> <ul> <li>Thijs</li> <li>Quinton</li> <li>Odysseas</li> <li>Yousef</li> </ul> <p>We believe that having a cycle and excluding Roman from the role of minute-taker would make it the fairest for the team. The minute-taker cycle is not strict, we\u00a0are flexible to modify it depending on the situation of each meeting (e.g., battery life, keyboard, whether the person is online,\u00a0etc.)</p>"},{"location":"CODE_OF_CONDUCT/#meetings","title":"Meetings","text":"<p>During the project,\u00a0many meetings will have to\u00a0be arranged\u00a0for several purposes.</p> <p>The team will\u00a0be meeting\u00a0at least once a week to do sprints, thus making sure everyone is on track and that the\u00a0development of the project\u00a0is going as planned.\u00a0If\u00a0agreed upon by\u00a0all of the team, then\u00a0more meetings can be arranged\u00a0internally to discuss deliverables or any other subject that is required.</p> <p>Moreover, we will have a weekly meeting with our\u00a0student\u2019s\u00a0assistant to ensure that we are doing well\u00a0in terms of\u00a0collaboration and grades.</p> <p>In addition, a meeting with the client will happen once a week to discuss progress and possible changes to the project.</p> <p>Meetings with the coach will happen periodically, if necessary: since our coach is\u00a0a\u00a0busy\u00a0person, we would like\u00a0to not disturb him with insignificant problems.\u00a0However, we will attempt to\u00a0have a meeting\u00a0with the coach on every significant milestone, and we will try to keep him informed about the general progress of our project. We expect to have biweekly meetings.</p> <p>To\u00a0ensure that we\u00a0are organized\u00a0during every meeting, we will have agendas that specify talking points.\u00a0The agendas will be created in order of the following list, looping back when everyone has done everything:</p> <ul> <li>Yousef</li> <li>Odysseas</li> <li>Quinton</li> <li>Thijs</li> <li>Roman</li> </ul> <p>After\u00a0an agenda has\u00a0been created, it should\u00a0be put\u00a0as a merge request in the documents repository, where people in the team can add/change points that exist through comments.\u00a0Finally, after one day of the merge request being up,\u00a0it should be merged\u00a0into the repository.</p>"},{"location":"CODE_OF_CONDUCT/#decision-making","title":"Decision-making","text":"<p>Decisions can\u00a0be classified\u00a0into\u00a02\u00a0different categories: minor and major</p> <p>Classification of a decision\u00a0is made\u00a0with a majority\u00a0vote,\u00a0or\u00a0simply\u00a0implied in clear-cut cases.</p> <p>Given a minor decision to\u00a0be made, we will do a majority\u00a0vote,\u00a0since a minor decision is not significant enough to warrant a long discussion and convincing.</p> <p>Given a\u00a0major\u00a0decision to\u00a0be made, we will\u00a0try\u00a0to get a consensus.\u00a0This\u00a0would involve\u00a0making sure\u00a0that every member of the discussion fully understands the details of the decision. Afterward, everyone would discuss their point of view for the decision.\u00a0If\u00a0there is yet to be a consensus after it\u00a0is thoroughly\u00a0discussed, then a majority vote would take place.</p> <p>In conclusion, our decision-making strategy should promote\u00a0not only communication but also\u00a0fast resolution, depending on the\u00a0\u201cseverity\u201d\u00a0of the decision.</p>"},{"location":"CODE_OF_CONDUCT/#dealing-with-conflicts","title":"Dealing with conflicts","text":"<p>Conflicts and decisions should\u00a0be handled\u00a0very\u00a0similarly,\u00a0and thus have a similar procedure\u00a0to follow.</p> <p>A conflict within the group can be classified as either minor or\u00a0major, which is either trivially identified or explained by a team member.</p> <p>Regardless of the type of conflict, there must be some form of discussion that has to take\u00a0place,\u00a0so that each team member is content with the resolution. Depending on the severity of the conflict,\u00a0more research should be done\u00a0and\u00a0a\u00a0longer\u00a0discussion should be had.\u00a0If either side of the conflict is not completely satisfied with the resolution after the collective team meeting, the conflict is going to\u00a0be lifted\u00a0to the level of a student assistant, which is going\u00a0to hopefully resolve the issue.\u00a0If the TA is also not able to help with the conflict resolution, or either side is still not satisfied with the resolution, the conflict is going to\u00a0be lifted\u00a0to the level of the course stuff, and we are going to attempt to resolve the conflict by emailing the course stuff. Further escalation is possible with the help of the course stuff if needed.</p>"},{"location":"CODE_OF_CONDUCT/#guidance","title":"Guidance","text":"<p>We expect to get help from\u00a0both\u00a0the student assistant and the coach for our project.</p> <p>From the student assistant, we would like to receive help with collaboration. Meaning how well we are collaborating, things\u00a0that we\u00a0can improve on in terms of\u00a0collaboration,\u00a0etc. We also expect some indication on course matters, such as what\u00a0it\u00a0is expected from us, whether we are allowed to do\u00a0certain\u00a0actions, setting up some privileged GitLab settings,\u00a0etc.</p> <p>From the coach, we would like to receive help with the content.\u00a0This means receiving feedback on the content of our documents, feedback on our application (since\u00a0in\u00a0our\u00a0case\u00a0the coach also has\u00a0an\u00a0extensive\u00a0amount of\u00a0knowledge/experience in the field of the application we are planning to make),\u00a0etc.</p>"},{"location":"CODE_OF_CONDUCT/#consequences","title":"Consequences","text":"<p>If a member does not keep to the agreements,\u00a0then we will ensure to\u00a0discuss it in our next internal meeting.\u00a0During this, we will\u00a0make sure to\u00a0highlight what action infringed our agreements and what could\u00a0be done\u00a0to prevent future infringements.</p> <p>If this behavior keeps persisting regardless of our warnings and feedback, then we would be forced to talk to someone of higher authority for them to guide us, or if that\u00a0doesn\u2019t\u00a0work either\u00a0then\u00a0for them to intervene. The person of higher authority should start from the TA, go to the coach, and\u00a0finally\u00a0the course coordinators.</p>"},{"location":"CODE_OF_CONDUCT/#success-factors","title":"Success factors","text":"<p>Our team has many qualities that make it a clear dream team.</p> <p>A crucial quality is communication. We are very talkative with each other, which allows for easy conflict resolution and efficient decision-making. Essentially, it boils down to us feeling free and not shy to discuss anything regarding the project. In addition, we encourage each other to participate in our decision-making.</p> <p>Moreover, we all have a good amount of knowledge in different subjects, which helps to enlighten everyone in the team with our perspective. As a team, we can solve problems in many\u00a0different ways, improving our\u00a0efficiency.</p> <p>And, of course, we care about the project and building a good product. We are motivated\u00a0and\u00a0we\u00a0want this project to be something to be proud of. We are not very far removed from the users of our software, which makes it all the more encouraging to build something that these people will find joy in using.</p>"},{"location":"CODE_OF_CONDUCT/#norms-or-evaluation-criteria","title":"Norms or evaluation criteria","text":"<ol> <li>Communicative</li> <li>Keeps deadlines</li> <li>Effort put into learning</li> <li>Hard-working</li> <li>Willingness to help others when in need</li> <li>Good attitude toward project/teammates</li> <li>Willingness to propose novel, disrupting solutions</li> </ol>"},{"location":"CONTRIBUTING/","title":"Contributing","text":"<p>Contributions (pull requests) are very welcome! Here's how to get started.</p>"},{"location":"CONTRIBUTING/#getting-started","title":"Getting started","text":"<p>First fork the library on GitHub (or GitLab).</p> <p>Then clone the library.</p> <pre><code>git clone https://github.com/your-username-here/spectral.git\ncd spectral\n</code></pre> <p>There are two main components: the app and the kernel. Each of them have a separate CONTRIBUTING.md, however there are also some general guidelines that apply to both. Here we continue with the general guidelines.</p> <p>Install the pre-commit hook. For example:</p> <pre><code>pip install pre-commit\npre-commit install\npre-commit install --hook-type commit-msg\n</code></pre> <p>These hooks mainly run formatters and linters for Python and Svelte. They also enforce conventional commits. In general, this project uses the conventional commits convention, so we expect all commits to follow it (except merge commits). If a PR does not follow conventional commits it will be squashed.</p>"},{"location":"CONTRIBUTING/#making-code-changes","title":"Making code changes","text":"<p>Spectral is divided in two parts, the app (SvelteKit) and the kernel (Python). You can refer to the readmes of the app and kernel respectively to gain more insight into how to contribute.</p> <p>To try out your changes, you can run the whole application using docker. First install docker and docker compose, and run:</p> <pre><code>docker compose up --build\n</code></pre> <p>Important: During the first run you need to populate the database with the schema. For some reason, we don't do this automatically, so you will have to do this by hand via entering the container with <code>docker exec -it atypical-speech-project-app-1 /bin/sh</code> (or maybe some other name, checkout <code>docker ps</code> if unsure), and then execute <code>pnpm db:push</code>.</p> <p>Make sure to add tests when appropriate. Ideally, there should be a test that would fail without your PR. The <code>ci.py</code> script does all testing, typechecking and linting:</p> <pre><code>./ci.py\n</code></pre> <p>Verify that the tests are passing! The CI will run the tests, but you can might want to run them locally as well. You can run only integration tests by doing:</p> <pre><code>./ci.py integration\n</code></pre> <p>Please make sure to keep a reasonable git history following conventional commits. If this is not the case in a PR, the PR will be squashed by the maintainers.</p> <p>After you are done with the feature, you can push your changes back to your fork:</p> <pre><code>git push\n</code></pre> <p>Finally, open a pull request on GitHub!</p>"},{"location":"CONTRIBUTING/#making-documentation-changes","title":"Making documentation changes","text":"<p>Make your changes. You can then build the documentation by doing</p> <pre><code>pip install -r docs/requirements.txt\nmkdocs serve\n</code></pre> <p>Then doing <code>Control-C</code>, and running:</p> <pre><code>mkdocs serve\n</code></pre> <p>(So you run <code>mkdocs serve</code> twice.)</p> <p>You can then see your local copy of the documentation by navigating to <code>localhost:8000</code> in a web browser.</p>"},{"location":"CONTRIBUTING/#documenting-code","title":"Documenting code","text":"<p>As part of our standard, we require that non-trivial code to be explained with comments. Make sure the comments are reasonably written with your judgement.</p>"},{"location":"CONTRIBUTING/#production","title":"Production","text":"<p>For production we have a different set of docker configuration files, that are postfixed with <code>.prod</code>. To run the production-wise setup use this command:</p> <pre><code>docker compose -f docker-compose.prod.yaml up --build\n</code></pre>"},{"location":"CONTRIBUTING_APP/","title":"Contributing to app","text":"<p>Make sure to take a look to the general contributing guidelines.</p> <p>There are two main aspects one might want to contribute to in this repo: adding a new mode or general contributing. Each one has different considerations, both of which are outlined below.</p> <ul> <li>General contributing</li> <li>Framework</li> <li>Package manager</li> <li>Styling</li> <li>Adding a new mode - Declaring mode data - Adding components - Registering the new mode - Kernel side</li> </ul>"},{"location":"CONTRIBUTING_APP/#general-contributing","title":"General contributing","text":""},{"location":"CONTRIBUTING_APP/#framework","title":"Framework","text":"<p>The framework used is SvelteKit. Svelte and SvelteKit are some of the quickest-to-learn frameworks out there. The best way to do is by following the official tutorial.</p>"},{"location":"CONTRIBUTING_APP/#package-manager","title":"Package manager","text":"<p>We use pnpm. Install pnpm following the instructions on the website.</p> <p>Then install dependencies with</p> <pre><code>pnpm install # or `pnpm i`\n</code></pre> <p>Dependencies should be automatically installed with <code>docker compose up --build</code>. However, you should install dependencies for the IDE language server to pick up type definitions and such.</p> <p>Other than that, <code>pnpm</code> is mostly used to add new dependencies (either <code>pnpm add &lt;dep&gt;</code> for production dependencies or <code>pnpm add -D &lt;dep&gt;</code> for development dependencies)</p>"},{"location":"CONTRIBUTING_APP/#styling","title":"Styling","text":"<p>We use tailwind for styling and shadcn-svelte for components.</p> <p>Try to use tailwind for most styling. Of course, if you want to something more complicated you can use regular <code>&lt;style&gt;</code> tags.</p> <p>You can browse the available shadcn components and usage at the website. If a component is not in the project already, you can add it via:</p> <pre><code>pnpm dlx shadcn-svelte add &lt;component&gt;\n</code></pre>"},{"location":"CONTRIBUTING_APP/#testing","title":"Testing","text":"<p>The frontend side is tested with end-to-end integration tests built with Playwright and unit tests made with vitest.</p>"},{"location":"CONTRIBUTING_APP/#unit-tests","title":"Unit tests","text":"<p>Unit tests are distributed all arould the place, being stored near the files they are related to. For example, under <code>src/lib/files/size.test.ts</code> you can find tests related to correctly showing filesizes.</p>"},{"location":"CONTRIBUTING_APP/#integration-tests","title":"Integration tests","text":"<p>The more interesting, and, arguably more important part of our testing suite are playwright tests: these are end-to-end tests, that simulate different actions on the web-facing application, and then check that we can see what we can see on the screen. The errors with these tests can be related to errors anywhere else in the project: e.g. if nginx configuration is incorrect, these tests would fail. Hence you should view these tests as a largely false-negative one: if it fails, then it is not necessarily your problem, but it still needs attention. So, if these tests fail on the dev branch, you should contact somebody about it. We will include large proportion of these tests in the CI, so that if these tests are failing, the functionality won't be merged, however, these tests run for a very long time, so make sure to rerun these tests yourself to not strain our CI servers :)</p> <p>The playwright tests should be added under <code>tests/</code> folder, and they can be run with <code>pnpm test:integration</code>. To install all the playwright dependencies, make sure to run <code>pnpm exec playwright install &amp;&amp; pnpm exec playwright install-deps</code> in your terminal.</p> <p>Note: we currently run the tests only for Blink and Gecko, no webkit, since the support for webkit on various linuxes seems unstable</p>"},{"location":"CONTRIBUTING_APP/#adding-a-new-mode","title":"Adding a new mode","text":"<p>Adding new modes of analysis is designed to be as straghtforward as possible, while still being as flexible as possible.</p> <p>As an overview, each modes needs to declare:</p> <ul> <li>A name</li> <li>Data it expects from the kernel</li> <li>File state</li> <li>Mode state</li> <li>A component that displays the data</li> <li>An icon</li> </ul> <p>If any step in the following instructions is unclear, you can always take a look to how other modes are implemented.</p>"},{"location":"CONTRIBUTING_APP/#declaring-mode-data","title":"Declaring mode data","text":"<p>First, create the file <code>app/src/lib/analysis/modes/&lt;your-mode&gt;/index.ts</code>. Here you declare the data following this template:</p> <pre><code>import { z } from 'zod';\nimport type { ModeValidator } from '..';\nimport { fileState } from '../file-state';\n\nexport const yourModeData = {\n    computedFileData: /* TODO */,\n\n    fileState: fileState\n        .pick({\n            /* TODO */\n        })\n        .default({}),\n\n    modeState: z.object({\n        /* TODO */\n    }).default({})\n} satisfies ModeValidator;\n</code></pre> <p>Then you need to fill in each field. Each field is a zod parser, which defines shapes that can be validated at runtime. Visit the zod docs for more info.</p> <ul> <li><code>computedFileData</code> is the data that is directly computed from the file. This info should be implemented in the Kernel.</li> <li><code>modeState</code> is synced state that is stored per-mode (and per-pane). Used for things such as toggles and sliders set by the user. For example, whether to show the legend in the graph.</li> <li><code>fileState</code> is state that is stored with each file, globally. For example, playback speed or selected frame. The file state is global for all modes. So, instead of declaring it in the mode data directly, it is declared in <code>file-state</code> and the mode picks fields from there. The file state is passed to the kernel as additional info (this is mainly used to send frames).</li> </ul> <p>Both <code>modeState</code> and <code>fileState</code> need to provide a default (this is because the state needs to be somehow initialized at some point).</p>"},{"location":"CONTRIBUTING_APP/#adding-components","title":"Adding components","text":"<p>Create a new component in <code>your-mode/YourMode.svelte</code>:</p> <pre><code>&lt;script lang=\"ts\"&gt;\n    import type { ModeComponentProps } from '..';\n\n    export let fileData: ModeComponentProps&lt;'your-mode'&gt;['fileData'];\n    export let modeState: ModeComponentProps&lt;'your-mode'&gt;['modeState'];\n&lt;/script&gt;\n\n&lt;!-- Implement your component here --&gt;\n</code></pre> <p>It is convenient to re-export the new mode from <code>.../modes/&lt;your-mode&gt;/index.ts</code>:</p> <pre><code>/** ... */\n\nexport { default as YourMode } from 'YourMode.svelte';\n</code></pre>"},{"location":"CONTRIBUTING_APP/#registering-the-new-mode","title":"Registering the new mode","text":"<p>Finally you have to register your new mode in <code>modes/index.ts</code>. You need to add the mode data in the <code>modes</code> constant:</p> <pre><code>export const modes = {\n    'simple-info': simpleInfoData,\n    waveform: waveformData,\n    spectrogram: spectrogramData,\n    'vowel-space': vowelSpaceData,\n    transcription: transcriptionData,\n    'your-mode': yourModeData\n} as const satisfies Record&lt;string, ModeValidator&gt;;\n</code></pre> <p>Then register the component and the icon</p> <pre><code>export const modeComponents: {\n    [M in keyof typeof modes]: {\n        component: ModeComponent&lt;M&gt;;\n        icon: ComponentType;\n    };\n} = {\n    'simple-info': {\n        component: SimpleInfo,\n        icon: InfoIcon\n    },\n\n    waveform: {\n        component: Waveform,\n        icon: AudioWaveformIcon\n    },\n\n    spectrogram: {\n        component: Spectrogram,\n        icon: SpectrogramIcon\n    },\n\n    'vowel-space': {\n        component: VowelSpace,\n        icon: VowelSpaceIcon\n    },\n\n    transcription: {\n        component: Transcription,\n        icon: CaptionsIcon\n    },\n\n    'your-mode': {\n        component: YourMode,\n        icon: YourModeIcon\n    }\n};\n</code></pre> <p>The icon can be custom made, but you can also use one from lucide if appropriate.</p>"},{"location":"CONTRIBUTING_APP/#kernel-side","title":"Kernel side","text":"<p>You need to implement and endpoint in the Python side with the same name as your mode that provides whatever you have declared that <code>computedData</code> should return.</p>"},{"location":"CONTRIBUTING_KERNEL/","title":"Contributing to kernel","text":"<p>Contributions (pull requests) are very welcome! Here's how to get started on the kernel.</p>"},{"location":"CONTRIBUTING_KERNEL/#dependencies","title":"Dependencies","text":"<p>For dependency management we use poetry. To install poetry run:</p> <pre><code>pip install poetry\n</code></pre> <p>To ensure that all the dependencies for the project are installed run the following:</p> <pre><code>poetry install\n</code></pre>"},{"location":"CONTRIBUTING_KERNEL/#tips","title":"Tips","text":"<ul> <li><code>poetry shell</code> enters the poetry venv, and now you won't have to poetry run everything</li> <li><code>poetry install -D package_name</code> installs package as a development dependency</li> <li><code>pytest --pdb</code> runs pytest with a debugger: stop on an error (or breakpoint)</li> </ul>"},{"location":"CONTRIBUTING_KERNEL/#tests","title":"Tests","text":"<p>There are currently two test suites available. Firstly, you can run pytest from the root of the kernel:</p> <pre><code>poetry run pytest --testmon -n auto\n</code></pre> <p>magical flags are needed for better performance and caching</p> <p>Besides that, you are always free to run the mutation testing suite (this will take a while, estimated 10 minutes and growing!):</p> <pre><code>poetry run mutmut run\n</code></pre> <p>We are targeting 50% mutation coverage, so here is that...</p>"},{"location":"CONTRIBUTING_KERNEL/#troubleshooting","title":"Troubleshooting","text":"<p>If something is not working, it is likely issue with some cache.</p> <ul> <li>Reset cache for docker with <code>docker prune -a; docker volume prune -fa</code></li> <li>Reset cache for testing with <code>rm .testmon* .mutmut*</code></li> </ul> <p>Otherwise, you can try to check whether poetry is alright via:</p> <pre><code>poetry lock\npoetry install\n</code></pre>"},{"location":"issues-and-mrs/","title":"How to makes issues and MRs","text":"<ul> <li>Type: Choose Incident if it\u2019s a bug, otherwise just a normal issue</li> <li>Description: Follow a template</li> <li>Assignees: assign yourself. if there is a person who is an expert in the topic, and will help you, you should also assign them</li> <li>Reviewers: Assign two people. If there is a particular person that should review, assign them. Otherwise assign people pseudo-arbitrarily, while trying to keep it evenly distributed.</li> <li>Milestone: one of MVP (0.1), 1.0</li> <li>Iteration: Corresponds to each weekly sprint (from 1 to 10, deadlines are on Mondays)</li> <li>Labels: any number of<ul> <li><code>bug</code>: Report/fix of unexpected behavior</li> <li><code>feature</code>: New functionality for product</li> <li><code>suggestion</code>: Suggestion that needs to be reviewed by other team members</li> <li><code>build</code>: Related to the build process of the project</li> <li><code>ci</code>: Related to the continuous integration pipeline</li> <li><code>dependencies</code>: Related to the dependencies of the project (i.e., dep bump)</li> <li><code>help-wanted</code>: Would benefit from someone else</li> <li><code>needs-info</code>: Additional information is required</li> <li><code>acknowledged</code>: Author has requested input from another person, and that person has seen it and acknowledged it</li> <li><code>priority::</code>: one of<ul> <li><code>P0(urgent)</code></li> <li><code>P1(soon)</code></li> <li><code>P2(eventually)</code></li> <li><code>P3(not-scheduled)</code></li> </ul> </li> <li><code>domain::</code> one of<ul> <li><code>kernel</code></li> <li><code>app</code></li> <li><code>docs</code> (have priority over the app/kernel)</li> </ul> </li> <li><code>question</code>: Contains a question that needs to be answered to move forward the issue</li> <li><code>duplicate</code>: Seems to be a duplicate of another issue</li> <li><code>refactoring</code>: Rewrite that doesn\u2019t change functionality</li> </ul> </li> <li>Weight: number between 1 and 5, where 5 is \u201cCannot work on my feature before this is fixed\u201d and 1 is \u201cDon\u2019t care, just a small nitpick\u201d</li> <li>Due date: Set the due date, usually the end of the sprint (Monday evening)</li> <li>Time tracking: put the estimate of the time you spend on the project, and add the time you spent accordingly; make sure to add at least some time before closing the issue!</li> <li>Confidentiality: Always non-confidential for users with <code>developer</code> role.</li> <li>Epics: We decided that epics do not work for our workflow.</li> </ul>"},{"location":"issues-and-mrs/#additional-notes-for-issues","title":"Additional notes for issues","text":"<ul> <li>When you close and issue, make sure to add a comment about why you are closing (e.g., \u201cClosing as duplicate of \u2026\u201d) unless it is closed by an MR</li> <li>Make issues granular, and add child items and/or linked issues when appropriate</li> </ul>"},{"location":"issues-and-mrs/#additional-notes-for-mrs","title":"Additional notes for MRs","text":"<ul> <li>Try to merge MRs in 3 days or less. The limit is 5 days to merge an MR, otherwise we will just close it, as we don't want to clutter the repo with stale MRs (barring exceptional cases, that should be justified). To facilitate this...</li> <li>Make MRs as small as possible and generally self-contained.</li> <li>Squash commits if history is messy/too detailed.</li> </ul>"}]}